(this.webpackJsonpsravnitel=this.webpackJsonpsravnitel||[]).push([[0],{34:function(e,t,a){e.exports=a(43)},43:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(14),l=a.n(s),r=a(25),o=a(17),f=a(11),c=a(18),h=a(19),d=a(22),u=a(6),v=a(61),m=a(62),p=a(8),y=a(57),g=a(44),b=a(59),x={content:{flexGrow:0,width:"100%",height:"100%",display:"flex",color:"text.primary"},main:{width:"100%",height:"100%",padding:"2%"},fileUpload:{padding:"0px"},bar:{height:"20px",minHeight:"20px"},addressCol:{display:"flex",flexWrap:"wrap",flexGrow:"0",flexShrink:"0",overflow:"hidden",width:"100px"},addressBox:{width:"100%",height:"20px",overflow:"hidden"},hex:{display:"flex",flexWrap:"wrap",flexGrow:"0",flexShrink:"0",overflow:"hidden",width:"240px"},value:{display:"flex",flexWrap:"wrap",flexGrow:"0",flexShrink:"0",overflow:"hidden",flexBasis:"240px"},byte:{width:"20px",height:"20px",overflow:"hidden",flexWrap:"wrap",flexGrow:"0",flexShrink:"0"},diff:{backgroundColor:"red"}};function w(e){return String.fromCharCode.apply(String,Object(p.a)(new Uint8Array(e))).split("")}function S(e){var t=Number(e).toString(16);return t="0x0000000000".substr(0,10-t.length)+t}var k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this))).styles=e.classes,a.onLoadFile=e.onLoadFile,a.onScrollUpdate=e.onScrollUpdate,a.state={file:[0],diffs:[],bytes:["00"],offsets:["0x0000000000"],values:["."],maxLines:e.maxLines?e.maxLines:25,sliderValue:0,currentStart:0,numberOfLines:1},a}return Object(d.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({file:e.file,currentStart:12*Math.floor(e.scrollPosition/12),diffs:e.diffs?e.diffs:[],numberOfLines:Math.floor(e.file.byteLength/12)+1,sliderValue:Math.floor(e.scrollPosition/12)},(function(){t.setContent()}))}},{key:"setContent",value:function(){var e=this.state.currentStart,t=this.state.file,a=e+12*this.state.maxLines;t.byteLength<a&&(a=t.byteLength);var i=t.slice(e,a);if(i.byteLength){for(var n,s=(n=i,Array.prototype.map.call(new Uint8Array(n),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")).match(/.{1,2}/g),l=[],r=e;r<a;r+=12)l.push(S(r));this.setState({bytes:s,offsets:l,values:w(i)})}}},{key:"isDifferent",value:function(e){var t=this.state.currentStart+e;return this.state.diffs.find((function(e){return e==t}))?this.styles.diff:""}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:this.styles.main},n.a.createElement(y.a,{position:"static",className:this.styles.bar},n.a.createElement(m.a,{className:this.styles.fileUpload,component:"label"},"Upload File",n.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(t){return e.onLoadFile(t.target.files)}}))),n.a.createElement(g.a,{elevation:3,className:this.styles.content},n.a.createElement(v.a,{display:"flex",flexGrow:"1"},n.a.createElement(v.a,{className:this.styles.addressCol},this.state.offsets.map((function(t){return n.a.createElement("span",{className:e.styles.addressBox},t)}))),n.a.createElement(b.a,{orientation:"vertical"}),n.a.createElement(v.a,{className:this.styles.hex},this.state.bytes.map((function(t,a){return n.a.createElement("span",{id:e.state.currentStart+a,className:e.styles.byte+" "+e.isDifferent(a)},t)}))),n.a.createElement(b.a,{orientation:"vertical"}),n.a.createElement(v.a,{className:this.styles.value},this.state.values.map((function(t){return n.a.createElement("span",{className:e.styles.byte},t)}))))))}}]),t}(i.Component),E=Object(u.a)(x)(k),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this))).styles=e.classes,a.currentDiff=0,a.state={file1:"00",file2:"00",targetFile:"00",scrollPosition:0,diffs:[],ranges:[]},a}return Object(d.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",(function(t){39==t.keyCode&&e.navigateToNextDiff(),37==t.keyCode&&e.navigateToPrevDiff()}))}},{key:"findPossiblePositionst",value:function(e,t,a){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=function(e,t){for(var a=[],i=0;i<t.length-e.length;++i){for(var n=!0,s=0;s<e.length;s++)if(t[i+s]!=e[s]){n=!1;break}n&&a.push(i)}return a},l=[],r=i;r<n;++r){var o=e.slice(a-r,a),f=s(o,t);if(0==f.length)break;if(1==f.length){l=f;break}l=f}return{posibleOffsets:l,numberOfSameBytes:r}}},{key:"calculateDifferences",value:function(){var e=this,t=new Uint8Array(this.state.file1),a=new Uint8Array(this.state.file2),i=new Uint8Array(this.state.targetFile);if("00"!=this.state.file1&&"00"!=this.state.file2&&t.length==a.length){for(var n=[],s=0;s<t.byteLength;++s)t[s]!=a[s]&&n.push(s);for(var l=[],o=0,f=1;f<n.length;++f)(n[f]-n[f-1]>20||f+1==n.length)&&(l.push({start:n[o],end:n[f-1]}),o=f);this.setState({diffs:n,ranges:l},(function(){e.navigateToPrevDiff()})),"00"!=i&&t.length==i.length&&(l=l.map((function(a){return Object(r.a)({},a,{},e.findPossiblePositionst(t,i,a.start))})),this.setState({diffs:n,ranges:l}),console.log(l))}}},{key:"onSave",value:function(e){var t=new Uint8Array(this.state.targetFile);console.log("Target file size ".concat(t.length));var a=this.state.ranges,i=!0,n=!1,s=void 0;try{for(var l,r=a[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var o=l.value;if(1==o.posibleOffsets.length)for(var f=o.posibleOffsets[0],c=o.start;c<o.end;++c){var h=f+c-o.start,d=t[h];t[h]=this.state.file2[c],console.log("Change ".concat(d," to ").concat(t[h]))}else console.log("Not solved: ".concat(JSON.stringify(o)))}}catch(u){n=!0,s=u}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}!function(e,t){console.log("Save file with size ".concat(e.size));var a=document.createElement("a"),i=a.href=URL.createObjectURL(e),n=document.body;a.download=t,n.appendChild(a),a.dispatchEvent(new MouseEvent("click")),n.removeChild(a),URL.revokeObjectURL(i)}(new Blob([t]),"pesho.bin")}},{key:"navigateToNextDiff",value:function(){this.currentDiff=Math.min(++this.currentDiff,this.state.ranges.length-1);var e=this.state.ranges[this.currentDiff].start;this.setState({scrollPosition:e})}},{key:"navigateToPrevDiff",value:function(){this.currentDiff=Math.max(--this.currentDiff,0);var e=this.state.ranges[this.currentDiff].start;this.setState({scrollPosition:e})}},{key:"loadTargetFile",value:function(e){var t=this;1==e.length&&e[0].arrayBuffer().then((function(e){return t.setState({targetFile:e},(function(){t.calculateDifferences()}))}))}},{key:"loadFile1",value:function(e){var t=this;1==e.length&&e[0].arrayBuffer().then((function(e){return t.setState({file1:e},(function(){t.calculateDifferences()}))}))}},{key:"loadFile2",value:function(e){var t=this;1==e.length&&e[0].arrayBuffer().then((function(e){return t.setState({file2:e},(function(){t.calculateDifferences()}))}))}},{key:"updateScroll",value:function(e){console.log(e),this.setState({scrollPosition:e})}},{key:"render",value:function(){return n.a.createElement(v.a,{className:this.styles.main},n.a.createElement(m.a,{variant:"contained",color:"primary",onClick:this.onSave.bind(this)},"Save As"),n.a.createElement(v.a,{className:this.styles.half},n.a.createElement(E,{file:this.state.targetFile,maxLines:"20",scrollPosition:this.state.scrollPosition,onLoadFile:this.loadTargetFile.bind(this),onScrollUpdate:this.updateScroll.bind(this)})),n.a.createElement(v.a,{className:this.styles.half},n.a.createElement(v.a,{className:this.styles.diffFile},n.a.createElement(E,{diffs:this.state.diffs,file:this.state.file1,maxLines:"10",scrollPosition:this.state.scrollPosition,onLoadFile:this.loadFile1.bind(this),onScrollUpdate:this.updateScroll.bind(this)})),n.a.createElement(v.a,{className:this.styles.verticalSpliter}),n.a.createElement(v.a,{className:this.styles.diffFile},n.a.createElement(E,{diffs:this.state.diffs,file:this.state.file2,maxLines:"10",scrollPosition:this.state.scrollPosition,onLoadFile:this.loadFile2.bind(this),onScrollUpdate:this.updateScroll.bind(this)}))))}}]),t}(n.a.Component),O=Object(u.a)({main:{flexGrow:1,width:"100%",height:"50%",display:"flex",color:"text.primary"},bar:{height:"20px",minHeight:"20px"},half:{width:"100%",minWidth:"500px"},diffFile:{flexGrow:0,display:"flex",height:"45%",width:"90%",marginLeft:"5%"},verticalSpliter:{flexGrow:0,display:"flex",height:"10%",width:"90%"}})(L);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.8ab81e61.chunk.js.map